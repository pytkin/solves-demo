(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{285:function(t,e,n){t.exports=n.p+"img/demo-image-01.18a5260.jpg"},286:function(t,e,n){t.exports=n.p+"img/demo-image-02.7db1cfb.jpg"},287:function(t,e,n){t.exports=n.p+"img/demo-image-03.49110c4.jpg"},288:function(t,e,n){t.exports=n.p+"img/demo-image-04.fc4a6ed.jpg"},289:function(t,e,n){"use strict";n.r(e);var o=n(168),l=Object(o.c)({props:{showHelloScreen:{type:Boolean,default:!1}},setup:function(t,e){var n=e.emit;return{handleClick:function(){n("start-journey")}}}}),c=n(80),component=Object(c.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"hello-screen"}},[this.showHelloScreen?e("div",{staticClass:"hello-screen"},[e("h3",[this._v("Создайте свой уникальный шаблон из блоков")]),this._v(" "),e("b-button",{attrs:{variant:"outline-primary",size:"lg"},on:{click:this.handleClick}},[e("b-icon",{attrs:{icon:"plus","aria-hidden":"true"}}),this._v(" Добавить новый блок\n    ")],1)],1):this._e()])}),[],!1,null,null,null);e.default=component.exports},290:function(t,e,n){"use strict";n.r(e);n(18);var o=n(168),l=Object(o.c)({props:{block:{type:Object,required:!0},blocksNumber:{type:Number,default:0}},setup:function(t,e){return Object(o.d)((function(){e.refs.blockTextInput.$el.focus()})),{handleSave:function(){e.emit("save")},handleCancel:function(){e.emit("cancel")},handleEdit:function(){e.emit("edit")}}}}),c=n(80),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{class:{"with-placeholder":!t.block.text}},[t._v("\n    "+t._s(t.block.text?t.block.text:"Введите текст")+"\n  ")]),t._v(" "),t.block.editing?[n("b-form-input",{ref:"blockTextInput",model:{value:t.block.text,callback:function(e){t.$set(t.block,"text",e)},expression:"block.text"}}),t._v(" "),n("div",{staticClass:"block-edit-actions"},[n("b-button",{attrs:{variant:"success",size:"sm"},on:{click:t.handleSave}},[t._v("Соханить")]),t._v(" "),n("b-button",{attrs:{size:"sm"},on:{click:t.handleCancel}},[t._v("Отменить")])],1)]:[n("div",{staticClass:"block-actions"},[n("b-button",{attrs:{variant:"light",size:"sm"},on:{click:t.handleEdit}},[n("b-icon",{attrs:{icon:"pencil"}})],1),t._v(" "),t.blocksNumber>1?n("b-button",{directives:[{name:"handle",rawName:"v-handle"}],attrs:{variant:"light",size:"sm"}},[n("b-icon",{attrs:{icon:"arrows-move"}})],1):t._e()],1)]],2)}),[],!1,null,null,null);e.default=component.exports},291:function(t,e,n){"use strict";n.r(e);n(18);var o=n(168),l=Object(o.c)({props:{block:{type:Object,required:!0},blocksNumber:{type:Number,default:0}},setup:function(t,e){var n=e.emit;return{handleEdit:function(){n("edit")}}}}),c=n(80),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.block.image?n("img",{attrs:{src:t.block.image,alt:""}}):t._e(),t._v(" "),n("div",{staticClass:"block-actions"},[n("b-button",{attrs:{variant:"light",size:"sm"},on:{click:t.handleEdit}},[n("b-icon",{attrs:{icon:"pencil"}})],1),t._v(" "),t.blocksNumber?n("b-button",{directives:[{name:"handle",rawName:"v-handle"}],attrs:{variant:"light",size:"sm"}},[n("b-icon",{attrs:{icon:"arrows-move"}})],1):t._e()],1)])}),[],!1,null,null,null);e.default=component.exports},292:function(t,e,n){"use strict";n.r(e);var o={mixins:[n(169).ElementMixin]},l=n(80),component=Object(l.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"block"},[this._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},293:function(t,e,n){"use strict";n.r(e);var o={mixins:[n(169).ContainerMixin]},l=n(80),component=Object(l.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"constructor-screen"},[this._t("default")],2)}),[],!1,null,null,null);e.default=component.exports},294:function(t,e,n){"use strict";n.r(e);n(21),n(16),n(27),n(58),n(48);var o=n(47),l=n(168),c=n(79),r=n(123),d=n(61),m=n(38);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(d.a)(t);if(e){var l=Object(d.a)(this).constructor;n=Reflect.construct(o,arguments,l)}else n=o.apply(this,arguments);return Object(r.a)(this,n)}}var h=function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(m.a)(this,t),this.editing=e},v=function(t){Object(c.a)(n,t);var e=f(n);function n(t){var o;Object(m.a)(this,n);var l=t.editing,c=t.text,text=void 0===c?"":c,r=t.prevText,d=void 0===r?"":r;return(o=e.call(this,l)).text=text,o.prevText=d,o}return n}(h),k=function(t){Object(c.a)(n,t);var e=f(n);function n(t){var o;Object(m.a)(this,n);var l=t.editing,c=t.image,image=void 0===c?"":c;return(o=e.call(this,l)).image=image,o}return n}(h),x=[n(285),n(286),n(287),n(288)],_=Object(l.c)({setup:function(t,e){var n=Object(l.e)({showHelloScreen:!0,showConstructorScreen:!1,blocks:[],anyOfBlockIsEditable:Object(l.a)((function(){return n.blocks.some((function(t){return t.editing}))})),editableImageBlocks:Object(l.a)((function(){return n.blocks.filter((function(t){return t instanceof k&&t.editing}))})),selectedImage:null,images:x});function c(t){switch(t){case"text":n.blocks.push(new v({editing:!0}));break;case"image":e.root.$bvModal.show("images-modal")}}return{state:n,startJourney:function(){n.showHelloScreen=!1,n.showConstructorScreen=!0,setTimeout((function(){e.root.$bvModal.show("actions-modal")}),300)},addBlock:c,handleActionClick:function(t,n){c(t),n&&e.root.$bvModal.hide(n)},handleTextBlockSaveClick:function(t){t.text&&t.text.length>0&&(t.prevText=t.text,t.editing=!1)},handleTextBlockCancelClick:function(t,e){t.text&&t.text.length>0&&t.prevText&&t.prevText.length>0?(t.prevText!==t.text&&(t.text=t.prevText),t.editing=!1):(n.blocks.length-1<=0&&(n.showHelloScreen=!0),setTimeout((function(){n.blocks=[].concat(Object(o.a)(n.blocks.slice(0,e)),Object(o.a)(n.blocks.slice(e+1)))}),300))},handleTextBlockEditClick:function(t){t.editing=!0},handleAddBlockOnConstructorClick:function(){e.root.$bvModal.show("actions-modal")},handleAddImageBlockClick:function(){var image=n.selectedImage,t=n.editableImageBlocks;null!==image&&(e.root.$on("bv::modal::hide",(function(o,l){"images-modal"===l&&(t[0]?(t[0].image=image,t[0].editing=!1):n.blocks.push(new k({image:image})),n.selectedImage=null,e.root.$off("bv::modal::hide"))})),e.root.$bvModal.hide("images-modal"))},handleCancelAddImageBlockClick:function(){e.root.$on("bv::modal::hide",(function(t,o){"images-modal"===o&&(n.selectedImage=null,e.root.$off("bv::modal::hide"))})),e.root.$bvModal.hide("images-modal")},handleImageBlockEditClick:function(t){t.editing=!0,n.selectedImage=t.image,e.root.$bvModal.show("images-modal")},handleImagesModalHidden:function(){var t=n.editableImageBlocks;t[0]&&(t[0].editing=!1),0===n.blocks.length&&(n.showHelloScreen=!0)},getBlockType:function(t){return t instanceof k?"image":t instanceof v?"text":void 0}}}}),C=n(80),component=Object(C.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-wrapper"},[n("HelloScreen",{attrs:{"show-hello-screen":t.state.showHelloScreen},on:{"start-journey":t.startJourney}}),t._v(" "),n("b-modal",{attrs:{id:"actions-modal","hide-header":"","hide-footer":""}},[n("b-button",{attrs:{variant:"light",size:"lg"},on:{click:function(e){return t.handleActionClick("text","actions-modal")}}},[n("b-icon",{attrs:{icon:"cursor-text"}}),t._v(" Текст\n    ")],1),t._v(" "),n("b-button",{attrs:{variant:"light",size:"lg"},on:{click:function(e){return t.handleActionClick("image","actions-modal")}}},[n("b-icon",{attrs:{icon:"images"}}),t._v(" Изображение\n    ")],1)],1),t._v(" "),n("b-modal",{attrs:{id:"images-modal"},on:{hidden:t.handleImagesModalHidden},scopedSlots:t._u([{key:"modal-title",fn:function(){return[t._v(" Выберите изображение ")]},proxy:!0},{key:"modal-footer",fn:function(){return[n("b-button",{attrs:{variant:"success",size:"sm"},on:{click:t.handleAddImageBlockClick}},[t._v("Соханить")]),t._v(" "),n("b-button",{attrs:{size:"sm"},on:{click:t.handleCancelAddImageBlockClick}},[t._v("Закрыть")])]},proxy:!0}])},[t._v(" "),n("div",{staticClass:"image-group"},[t._l(t.state.images,(function(image,e){return[n("div",{key:"images-"+e,staticClass:"image-wrap",class:{"is-selected":t.state.selectedImage===image}},[n("img",{attrs:{src:image,alt:""},on:{click:function(e){t.state.selectedImage=image}}})])]}))],2)]),t._v(" "),t.state.showConstructorScreen?n("SortableList",{attrs:{"lock-axis":"y","use-drag-handle":!0},model:{value:t.state.blocks,callback:function(e){t.$set(t.state,"blocks",e)},expression:"state.blocks"}},[t._l(t.state.blocks,(function(e,o){return[n("SortableItem",{key:o,class:["block-"+t.getBlockType(e),e.editing?"block-editing":null],attrs:{index:o}},["text"===t.getBlockType(e)?[n("TextBlock",{attrs:{block:e,"blocks-number":t.state.blocks.length},on:{save:function(n){return t.handleTextBlockSaveClick(e)},cancel:function(n){return t.handleTextBlockCancelClick(e,o)},edit:function(n){return t.handleTextBlockEditClick(e)}}})]:"image"===t.getBlockType(e)?[n("ImageBlock",{attrs:{block:e,"blocks-number":t.state.blocks.length},on:{edit:function(n){return t.handleImageBlockEditClick(e)}}})]:t._e()],2)]})),t._v(" "),t.state.blocks.length>0?n("div",{staticClass:"add-block-holder"},[n("b-button",{attrs:{variant:"outline-primary",size:"lg",disabled:t.state.anyOfBlockIsEditable},on:{click:t.startJourney}},[n("b-icon",{attrs:{icon:"plus","aria-hidden":"true"}}),t._v(" Добавить новый блок")],1)],1):t._e()],2):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{HelloScreen:n(289).default,TextBlock:n(290).default,ImageBlock:n(291).default,SortableItem:n(292).default,SortableList:n(293).default})}}]);